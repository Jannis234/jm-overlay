# Based on the files generated by node-gyp

CXXFLAGS += -DNODE_GYP_MODULE_NAME=buffertools \
	-DUSING_UV_SHARED=1 \
	-DUSING_V8_SHARED=1 \
	-DV8_DEPRECATION_WARNINGS=1 \
	-D_LARGEFILE_SOURCE \
	-D_FILE_OFFSET_BITS=64 \
	-DBUILDING_NODE_EXTENSION \
	-c -fPIC -pthread -std=gnu++0x \
	-I/usr/include/node

LDFLAGS += -shared -pthread -rdynamic \
	-Wl,-soname=buffertools.node

all:
	mkdir -p build/Release
	$(CXX) $(CXXFLAGS) buffertools.cc -o buffertools.o
	$(CXX) $(LDFLAGS) buffertools.o -o build/Release/buffertools.node
